# cpe.yaml - Unified CPE Configuration
version: "1.0"

# MCP server definitions
mcpServers:
  editor:
    command: "editor-mcp"
    type: stdio
    timeout: 60
    toolFilter: whitelist
    enabledTools:
      - text_edit
      - shell

# Model definitions with optional generation defaults
models:
  - ref: flash
    display_name: "Gemini Flash Latest"
    id: gemini-flash-latest
    type: gemini
    api_key_env: GEMINI_API_KEY
    context_window: 1048576
    max_output: 65536
    input_cost_per_million: 0.30
    output_cost_per_million: 2.50

  - ref: kimig
    display_name: "Kimi K2"
    id: moonshotai/kimi-k2-instruct-0905
    type: openai
    base_url: https://api.groq.com/openai/v1/
    api_key_env: GROQ_API_KEY
    context_window: 262144
    max_output: 16384
    input_cost_per_million: 1
    output_cost_per_million: 3

  - ref: qwenn
    display_name: "Qwen Next 80B"
    id: qwen/qwen3-next-80b-a3b-instruct
    type: openai
    base_url: https://openrouter.ai/api/v1/
    api_key_env: OPENROUTER_API_KEY
    context_window: 262100
    max_output: 16384
    input_cost_per_million: 2
    output_cost_per_million: 2
    # Example of request patching
    patchRequest:
      includeHeaders:
        HTTP-Referer: https://my-app.example.com
        X-Title: My AI App
    #   jsonPatch:
    #     - op: add
    #       path: /custom_field
    #       value: custom_value


  - ref: qwen
    display_name: "Qwen3 Max"
    id: qwen/qwen3-max
    type: openai
    base_url: https://openrouter.ai/api/v1/
    api_key_env: OPENROUTER_API_KEY
    context_window: 262100
    max_output: 16384
    input_cost_per_million: 2
    output_cost_per_million: 2

  - ref: codex
    display_name: "GPT-5 Codex"
    id: gpt-5-codex
    type: responses
    api_key_env: OPENAI_API_KEY
    context_window: 400000
    max_output: 128000
    input_cost_per_million: 1.25
    output_cost_per_million: 10
    systemPromptPath: "./codex_instructions.prompt"

  - ref: gpt5
    display_name: "GPT-5"
    id: gpt-5
    type: responses
    api_key_env: OPENAI_API_KEY
    context_window: 400000
    max_output: 128000
    input_cost_per_million: 1.25
    output_cost_per_million: 10

  - ref: gpt5mini
    display_name: "GPT-5 Mini"
    id: gpt-5-mini
    type: responses
    api_key_env: OPENAI_API_KEY
    context_window: 400000
    max_output: 128000
    input_cost_per_million: 0.25
    output_cost_per_million: 2

  - ref: gpt5nano
    display_name: "GPT-5 Nano"
    id: gpt-5-nano
    type: responses
    api_key_env: OPENAI_API_KEY
    context_window: 400000
    max_output: 128000
    input_cost_per_million: 0.05
    output_cost_per_million: 0.40

  - ref: opus
    display_name: "Claude Opus 4.1"
    id: claude-opus-4-1-20250805
    type: anthropic
    api_key_env: ANTHROPIC_API_KEY
    context_window: 200000
    max_output: 32000
    input_cost_per_million: 15
    output_cost_per_million: 75

  - ref: sonnet
    display_name: "Claude Sonnet 4.5"
    id: claude-sonnet-4-5-20250929
    type: anthropic
    api_key_env: ANTHROPIC_API_KEY
    context_window: 200000
    max_output: 64000
    input_cost_per_million: 3
    output_cost_per_million: 15

# Global defaults
defaults:
  systemPromptPath: "./examples/agent_instructions.prompt"
  model: "sonnet"
  timeout: "5m"
  noStream: false